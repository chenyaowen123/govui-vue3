"use strict";Object.defineProperties(exports,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}});const l=require("vue"),z=require("../input/input.vue.js"),_=require("../popper/popper.vue.js"),q=require("../icon/icon.vue.js"),x=require("./cascader-panel.vue.js"),S=require("../utils/useReset.js"),$={class:"gov-cascader__box"},j=Object.assign({name:"GovCascader"},{__name:"cascader",props:{modelValue:{type:Array,default:()=>[]},options:{type:Array,default:()=>[]},size:String,placeholder:{type:String,default:"请输入"},disabled:Boolean,clear:{type:Boolean,default:!0},showAllLevels:{type:Boolean,default:!0},triggerForm:{type:Boolean,default:!0}},emits:["change","focus","blur","clear","update:modelValue"],setup(d,{emit:g}){const a=d,n=l.ref(!1),u=g,e=l.inject("govFormItem",null),c=l.computed({get(){return a.modelValue},set(t){u("change",t),u("update:modelValue",t),a.triggerForm&&(e==null||e.$emit("change"))}});S.useReset(e,a,t=>{u("update:modelValue",t)});const b=l.computed(()=>(a==null?void 0:a.size)||(e==null?void 0:e.size)),o=l.computed(()=>(a==null?void 0:a.disabled)||(e==null?void 0:e.disabled)),h=(t,r)=>r.map(s=>{const f=(B,p)=>{for(const i of B){if(i.value===p)return i.label;if(i.children){const m=f(i.children,p);if(m)return m}}return null};return f(t,s)}),V=l.computed(()=>{let t=h(a.options,c.value);return a.showAllLevels?t.join(" / "):t.length>0?t[t.length-1]:""});l.watch(()=>o.value,()=>{n.value=!1});const v=()=>{o.value||(n.value=!n.value)},y=()=>{u("focus"),a.triggerForm&&(e==null||e.$emit("focus"))},w=()=>{u("blur"),a.triggerForm&&(e==null||e.$emit("blur"))},C=()=>{n.value=!1,u("clear"),u("change",[]),u("update:modelValue",[]),a.triggerForm&&(e==null||e.$emit(["clear","change"]))};return(t,r)=>(l.openBlock(),l.createBlock(_.default,l.mergeProps({modelValue:n.value,"onUpdate:modelValue":r[2]||(r[2]=s=>n.value=s),padding:"0"},t.$attrs,{class:["gov-cascader",[{"is-disabled":o.value}]],placement:"bottom-start"}),{reference:l.withCtx(()=>[l.createVNode(z.default,{class:"gov-cascader__input",modelValue:V.value,size:b.value,placeholder:d.placeholder,disabled:o.value,onFocus:y,onBlur:w,onClear:C,onClick:v,readonly:"",triggerForm:!1},{suffix:l.withCtx(()=>[l.createVNode(q.default,{name:"arrow-down",class:l.normalizeClass(["gov-cascader__icon",[{"is-open":n.value}]])},null,8,["class"])]),_:1},8,["modelValue","size","placeholder","disabled"])]),default:l.withCtx(()=>[l.createElementVNode("div",$,[l.createVNode(x.default,{modelValue:c.value,"onUpdate:modelValue":r[0]||(r[0]=s=>c.value=s),options:d.options,onSelect:r[1]||(r[1]=s=>n.value=!1)},null,8,["modelValue","options"])])]),_:1},16,["modelValue","class"]))}});exports.default=j;
