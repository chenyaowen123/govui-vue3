"use strict";Object.defineProperty(exports,Symbol.toStringTag,{value:"Module"});const n=require("vue"),V=require("./useRules.js"),m=require("./utils.js"),y=require("../../../node_modules/async-validator/dist-web/index.js");function P(l,u,f){const{isRequired:g,getTriggerRule:p}=V.useRules(l,u),e=n.ref(!0),s=n.ref(""),q=n.computed(()=>{let a=u==null?void 0:u.model;if(a&&l.prop){let i=l.prop;return m.getPropByPath(a,i,!0).value}else return}),h=(a,i=()=>{})=>{let r=p(a);if(!r||r.length===0)return i(e.value),!0;e.value="validating";const c={},o={};c[l.prop]=q.value,o[l.prop]=r.map(t=>(delete t.trigger,t)),new y.default(o).validate(c,{firstFields:!0},(t,R)=>{let v=t&&t.length!==0;e.value=v?"error":"success",s.value=v?t[0].message:"",i(e.value,R)})},d=()=>{e.value="",s.value=""};return{isRequired:g,validateState:e,validateMessage:s,validate:h,clearValidate:d,resetField:()=>{f.emit("reset"),d()}}}exports.useValidation=P;
