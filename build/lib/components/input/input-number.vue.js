"use strict";Object.defineProperties(exports,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}});const a=require("vue"),C=require("./input.vue.js"),m=require("../icon/icon.vue.js"),r=require("../../node_modules/numeral/numeral.js"),S=require("../utils/useReset.js"),k={class:"gov-input-number"},x={key:0,class:"gov-input-number__buttons"},E=Object.assign({name:"GovInputNumber"},{__name:"input-number",props:{modelValue:{},min:{type:Number,default:Number.MIN_SAFE_INTEGER},max:{type:Number,default:Number.MAX_SAFE_INTEGER},step:{type:Number,default:1},format:{type:String,default:"0,0"},valueFormat:{type:Boolean,default:!1},controls:{type:Boolean,default:!1},prefix:{type:[String,Number],default:void 0},size:String,disabled:Boolean,triggerForm:{type:Boolean,default:!0}},emits:["update:modelValue","focus","blur","change","input","clear","add","subtract"],setup(s,{emit:p}){const e=s,l=p,i=n=>{if(!n&&n!==0)return;const u=r.default(n).value(),c=Math.min(Math.max(u,e.min),e.max);return e.format&&e.valueFormat?r.default(c).format(e.format):r.default(c).value()},b=a.computed(()=>{if(!(!e.modelValue&&e.modelValue!==0))return e.format?r.default(e.modelValue).format(e.format):r.default(e.modelValue).value()}),t=a.inject("govFormItem",null);S.useReset(t,e,n=>{const u=i(n);l("update:modelValue",u)});const V=a.computed(()=>(e==null?void 0:e.size)||(t==null?void 0:t.size)),d=a.computed(()=>(e==null?void 0:e.disabled)||(t==null?void 0:t.disabled)),h=()=>{l("focus"),e.triggerForm&&(t==null||t.$emit("focus"))},g=()=>{l("blur"),e.triggerForm&&(t==null||t.$emit("blur"))};function v(n){const u=i(n);l("update:modelValue",u),l("change",u),e.triggerForm&&(t==null||t.$emit("change"))}function N(n){l("input",n),e.triggerForm&&(t==null||t.$emit("input"))}const $=()=>{l("clear"),e.triggerForm&&(t==null||t.$emit("clear"))},o=a.computed(()=>{if(d.value)return!0;let n=e.modelValue||0,u=r.default(n).add(e.step).value();return d.value||u>e.max}),f=a.computed(()=>{if(d.value)return!0;let n=e.modelValue||0,u=r.default(n).subtract(e.step).value();return d.value||u<e.min});function y(){if(o.value)return;const n=r.default(e.modelValue||0).add(e.step).value(),u=i(n);l("update:modelValue",u),l("change",u),l("add",u),e.triggerForm&&(t==null||t.$emit(["change","add"]))}function B(){if(f.value)return;const n=r.default(e.modelValue||0).subtract(e.step).value(),u=i(n);l("update:modelValue",u),l("change",u),l("subtract",u),e.triggerForm&&(t==null||t.$emit(["change","subtract"]))}return(n,u)=>(a.openBlock(),a.createElementBlock("div",k,[a.createVNode(C.default,a.mergeProps(n.$attrs,{prefix:s.prefix,size:V.value,disabled:d.value,"model-value":b.value,onFocus:h,onBlur:g,onChange:v,onInput:N,onClear:$,triggerForm:!1,class:"gov-input-number__input"}),a.createSlots({_:2},[n.$slots.addonBefore?{name:"addonBefore",fn:a.withCtx(()=>[a.renderSlot(n.$slots,"addonBefore")]),key:"0"}:void 0,n.$slots.addonAfter?{name:"addonAfter",fn:a.withCtx(()=>[a.renderSlot(n.$slots,"addonAfter")]),key:"1"}:void 0,n.$slots.prefix?{name:"prefix",fn:a.withCtx(()=>[a.renderSlot(n.$slots,"prefix")]),key:"2"}:void 0,n.$slots.suffix?{name:"suffix",fn:a.withCtx(()=>[a.renderSlot(n.$slots,"suffix")]),key:"3"}:void 0]),1040,["prefix","size","disabled","model-value"]),s.controls?(a.openBlock(),a.createElementBlock("div",x,[a.createElementVNode("div",{onClick:y,class:a.normalizeClass([{"is-disabled":o.value}])},[a.createVNode(m.default,{name:"plus"})],2),a.createElementVNode("div",{onClick:B,class:a.normalizeClass([{"is-disabled":f.value}])},[a.createVNode(m.default,{name:"minus"})],2)])):a.createCommentVNode("",!0)]))}});exports.default=E;
