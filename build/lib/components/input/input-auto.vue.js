"use strict";Object.defineProperties(exports,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}});const e=require("vue"),k=require("./input.vue.js"),y=require("../popper/popper.vue.js"),C=require("../utils/useReset.js"),S={class:"gov-input-auto__list"},B=["onClick"],b=Object.assign({name:"GovInputAuto"},{__name:"input-auto",props:{modelValue:String,fetch:Function,valueKey:{type:String,default:"value"},popperHeight:{type:String,default:"200px"},size:String,triggerForm:{type:Boolean,default:!0}},emits:["update:modelValue","input","change","select","focus","blur","clear"],setup(i,{emit:c}){const n=i,r=e.ref(!1),s=e.ref([]),u=c,d=e.computed(()=>n.fetch||(()=>Promise.resolve([]))),f=e.computed({get(){return n.modelValue},set(t){u("update:modelValue",t)}}),l=e.inject("govFormItem",null);C.useReset(l,n,t=>{u("update:modelValue",t)});const p=t=>{s.value=d.value(t),r.value=!0,u("input",t),n.triggerForm&&(l==null||l.$emit("input"))},g=t=>{u("change",t),n.triggerForm&&(l==null||l.$emit("change"))},h=()=>{s.value=d.value(n.modelValue),r.value=!0,u("focus"),n.triggerForm&&(l==null||l.$emit("focus"))},m=()=>{s.value=d.value(n.modelValue),r.value=!1,u("blur"),n.triggerForm&&(l==null||l.$emit("blur"))},v=()=>{u("clear"),n.triggerForm&&(l==null||l.$emit("clear"))},V=t=>{let o=t;typeof t!="string"&&(o=t[n.valueKey]),r.value=!1,u("select",t),u("update:modelValue",o),u("input",o),n.triggerForm&&(l==null||l.$emit(["select","input"]))};return(t,o)=>(e.openBlock(),e.createBlock(y.default,e.mergeProps({modelValue:r.value,"onUpdate:modelValue":o[1]||(o[1]=a=>r.value=a),height:i.popperHeight,padding:"0"},t.$attrs,{placement:"bottom-start",class:"gov-input-auto"}),{reference:e.withCtx(()=>[e.createVNode(k.default,e.mergeProps({modelValue:f.value,"onUpdate:modelValue":o[0]||(o[0]=a=>f.value=a)},t.$attrs,{onFocus:h,onBlur:m,onInput:p,onChange:g,onClear:v,size:i.size,triggerForm:!1}),e.createSlots({_:2},[t.$slots.addonBefore?{name:"addonBefore",fn:e.withCtx(()=>[e.renderSlot(t.$slots,"addonBefore")]),key:"0"}:void 0,t.$slots.addonAfter?{name:"addonAfter",fn:e.withCtx(()=>[e.renderSlot(t.$slots,"addonAfter")]),key:"1"}:void 0,t.$slots.prefix?{name:"prefix",fn:e.withCtx(()=>[e.renderSlot(t.$slots,"prefix")]),key:"2"}:void 0,t.$slots.suffix?{name:"suffix",fn:e.withCtx(()=>[e.renderSlot(t.$slots,"suffix")]),key:"3"}:void 0]),1040,["modelValue","size"])]),default:e.withCtx(()=>[e.createElementVNode("div",S,[(e.openBlock(!0),e.createElementBlock(e.Fragment,null,e.renderList(s.value,(a,$)=>(e.openBlock(),e.createElementBlock("div",{class:"gov-input-auto__li",key:$,onClick:w=>V(a)},[e.renderSlot(t.$slots,"default",{item:a},()=>[e.createTextVNode(e.toDisplayString(a),1)])],8,B))),128))])]),_:3},16,["modelValue","height"]))}});exports.default=b;
