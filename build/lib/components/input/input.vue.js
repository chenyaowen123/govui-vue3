"use strict";Object.defineProperties(exports,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}});const e=require("vue"),g=require("../icon/icon.vue.js"),w=require("../utils/useReset.js"),C={key:0,class:"gov-input-addon gov-input-addon-before"},$={key:0,class:"gov-input-prefix"},E=["type","placeholder","maxlength","disabled","readonly"],z={key:1,class:"gov-input-suffix"},A={key:2,class:"gov-input-count"},D={key:3,class:"gov-input-suffix"},T={key:1,class:"gov-input-addon gov-input-addon-after"},M=Object.assign({name:"GovInput"},{__name:"input",props:{width:{type:Number,default:null},size:String,addonBefore:[String,Number],addonAfter:[String,Number],prefix:[String,Number],suffix:[String,Number],clearable:{type:Boolean,default:!0},password:Boolean,disabled:Boolean,readonly:Boolean,placeholder:{type:String,default:"请输入"},maxlength:Number,count:Boolean,modelValue:[String,Number],triggerForm:{type:Boolean,default:!0}},emits:["update:modelValue","clear","input","change","focus","blur"],setup(a,{emit:h}){const t=a,c=e.ref(null),r=e.ref(!1),l=h,f=e.computed({get(){return t.modelValue},set(o){l("update:modelValue",o)}}),n=e.inject("govFormItem",null);w.useReset(n,t,o=>{l("update:modelValue",o)});const v=e.computed(()=>(t==null?void 0:t.size)||(n==null?void 0:n.size)),s=e.computed(()=>(t==null?void 0:t.disabled)||(n==null?void 0:n.disabled)),B=e.computed(()=>(n==null?void 0:n.validateState)==="error"),i=e.useSlots(),u={prefix:i.prefix||t.prefix!==void 0,suffix:i.suffix||t.suffix!==void 0,addonBefore:i.addonBefore||t.addonBefore!==void 0,addonAfter:i.addonAfter||t.addonAfter!==void 0},p=e.computed(()=>!s.value&&t.clearable),V=e.computed(()=>t.maxlength!==void 0?`${t.modelValue?t.modelValue.length:0} / ${t.maxlength}`:t.modelValue?t.modelValue.length:0),k=e.computed(()=>p.value||t.password||t.count||u.suffix);function x(o){l("input",o.target.value),t.triggerForm&&(n==null||n.$emit("input"))}function y(o){l("change",o.target.value),t.triggerForm&&(n==null||n.$emit("change")),e.nextTick(()=>{c.value.value=t.modelValue})}function b(){l("update:modelValue",""),l("clear"),l("input",""),l("change",""),t.triggerForm&&(n==null||n.$emit(["clear","change","input"]))}function N(o){l("blur",o),t.triggerForm&&(n==null||n.$emit("blur"))}function S(o){l("focus",o),t.triggerForm&&(n==null||n.$emit("focus"))}return(o,d)=>(e.openBlock(),e.createElementBlock("div",{class:"gov-input-wrap",style:e.normalizeStyle(a.width?`width: ${t.width}px;`:"")},[u.addonBefore?(e.openBlock(),e.createElementBlock("span",C,[e.renderSlot(o.$slots,"addonBefore",{},()=>[e.createTextVNode(e.toDisplayString(a.addonBefore),1)])])):e.createCommentVNode("",!0),e.createElementVNode("div",{class:e.normalizeClass(["gov-input",[`gov-input--size-${v.value}`,{"gov-input--before":u.addonBefore,"gov-input--after":u.addonAfter,"is-disabled":s.value,"is-error":B.value}]])},[u.prefix?(e.openBlock(),e.createElementBlock("span",$,[e.renderSlot(o.$slots,"prefix",{},()=>[e.createTextVNode(e.toDisplayString(a.prefix),1)])])):e.createCommentVNode("",!0),e.withDirectives(e.createElementVNode("input",{ref_key:"inputRef",ref:c,class:"gov-input-field",type:a.password&&!r.value?"password":"text","onUpdate:modelValue":d[0]||(d[0]=m=>f.value=m),placeholder:a.placeholder,maxlength:a.maxlength,disabled:s.value,readonly:a.readonly,onInput:x,onChange:y,onFocus:S,onBlur:N},null,40,E),[[e.vModelDynamic,f.value]]),k.value?(e.openBlock(),e.createElementBlock("span",z,[p.value?(e.openBlock(),e.createElementBlock("span",{key:0,class:e.normalizeClass(["gov-input-action gov-input-clear",[{"has-value":a.modelValue||a.modelValue==0}]]),onClick:e.withModifiers(b,["stop"])},[e.createVNode(g.default,{name:"close"})],2)):e.createCommentVNode("",!0),a.password?(e.openBlock(),e.createElementBlock("span",{key:1,class:e.normalizeClass(["gov-input-action gov-input-password",{"is-active":r.value}]),onClick:d[1]||(d[1]=m=>r.value=!r.value)},[e.createVNode(g.default,{name:"view"})],2)):e.createCommentVNode("",!0),a.count?(e.openBlock(),e.createElementBlock("span",A,e.toDisplayString(V.value),1)):e.createCommentVNode("",!0),u.suffix?(e.openBlock(),e.createElementBlock("span",D,[e.renderSlot(o.$slots,"suffix",{},()=>[e.createTextVNode(e.toDisplayString(a.suffix),1)])])):e.createCommentVNode("",!0)])):e.createCommentVNode("",!0)],2),u.addonAfter?(e.openBlock(),e.createElementBlock("span",T,[e.renderSlot(o.$slots,"addonAfter",{},()=>[e.createTextVNode(e.toDisplayString(a.addonAfter),1)])])):e.createCommentVNode("",!0)],4))}});exports.default=M;
